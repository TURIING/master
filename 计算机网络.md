### 第1章 计算机网络体系结构

`计算机网络的功能`

1⃣️ **数据通信**   ==计算机网络中最基本、最重要的功能==		2⃣️ **资源共享**  可以是==软件、数据、硬件共享==

3⃣️ **分布式处理**（多台计算机各自承担同一工作任务的不同部分）

4⃣️ **提高可靠性**			5⃣️ **负载均衡**

`计算机网络的组成`

* **从组成部分上看**

    一个完整的计算机网络主要由==硬件、软件、协议==三部分组成

* **从工作方式上看**

    * **边缘部分**

    	<u>由所有连接到因特网上、供用户直接使用的主机组成</u>（个人设备）

    * **核心部分**

    	<u>由大量的网络和连接这些网络的路由器组成</u>，为边缘部分提供连通性和交换服务

* **从功能组成上看**

    * **通信子网**

      <u>由各种传输介质、通信设备和相应的网络协议组成</u>（**实现数据通信**）

      ==网桥、交换机、路由器==

    * **资源子网**
    
    	<u>是实现资源共享功能的设备及其软件的集合</u>（**实现资源共享/数据处理**）

<img src="计算机网络.assets\image-20211024195702183.png" alt="image-20211024195702183" style="zoom: 45%;" />

`计算机网络的分类`

* **按分布范围**

    1⃣️ **广域网**（WAN）==使用交换技术==    		2⃣️ **城域网**（MAN）**大多采用以太网技术**

    3⃣️ **局域网**（LAN）==采用广播技术==			  4⃣️ **个人区域网**（PAN）

    ==广域网和局域网之间的差异不仅在于它们所覆盖的范围不同，还在于它们所采用的协议和网络技术的不同==

    （<u>故在较小范围内布置的不一定是局域网，较大范围内布置的不一定是广域网</u>）

    城域网可视为为了满足一定的区域需求，而将多个局域网互联的局域网

    **局域网与广域网的互联是通过路由器来实现的**

* **按使用者**

    1⃣️ **公用网**   电信公司出资建造的大型网络

    2⃣️ **专用网**   某个部门为满足本单位特殊业务的需要而建造的网络

* **按交换技术**

    1⃣️ 电路交换网络 		2⃣️ 报文交换网络 		3⃣️ 分组交换网络

* **按拓扑结构**

<img src="计算机网络.assets\image-20211024200606697.png" alt="image-20211024200606697" style="zoom: 45%;" />

​		==星形、总线形、环形网络多用于局域网==、==网状网络多用于广域网==

​		**计算机网络拓扑结构主要取决于它的通信子网**

​		==$在n个结点的星形拓扑结构中，有n-1条物理链路$==

* **按传输技术**

    * **广播式网络** 

      ==广域网中的无线、卫星通信网络也采用广播式通信技术==

      ==广播式网络共享广播信道、不存在路由选择问题、可以不要网络层==

    * **点对点网络**
    
    	==使用分组存储转发和路由选择机制==，**广域网基本都属于点对点网络**

`计算机网络的性能指标`

* **速率**

​		也称__数据传输速率、数据率、比特率__；单位b/s；<u>通常把最高数据传输速率称为带宽</u>

* **带宽**

​		表示网络的通信线路传送数据的能力，通常是单位时间内从网络中的某一点到另一点所能通过的最高数据率，单位b/s

* **吞吐量**

​		表示单位时间内通过某个网络的数据量；单位b/s、kb/s等

* **时延**

​		==$发送时延 = \frac{数据长度}{信道宽度（发送速率）}$==、==$传播时延 = \frac{信道长度}{电磁波在信道上的传播速率}$==

​		==$总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延$==

* **时延带宽积**

​		（某段链路上有多少比特，即容量，单位bit）

​		==$时延带宽积 = 传播时延 \times 信道带宽$==

* **往返时延RTT**

​		（表示从发送方发送数据开始，到发送方收到接收方的确认总共经历的时延）

​		==$RTT=传播时延\times 2+末端处理时间$==

* **信道利用率**

​		（指某一信道有百分之多少的时间是有数据通过的）

​		==$信道利用率 = \frac{有数据通过时间}{（有+无）数据通过时间}$==

`分层结构`

**实体**:  第n层的活动元素，指任何可发送或接收信息的硬件或软件进程

**对等层**:  不同机器上的同一层

**对等实体**:  同一层的实体

**协议**:  为进行网络中的对等实体数据交换而建立的规则、标准或约定(==不对等实体间没有协议==)

​			  协议由语法、语义、同步三部分组成：

​			  1⃣️ ==语法规定了传输数据的格式==

​			  2⃣️ ==语义规定了所要完成的功能，即需要发出何种控制信息、完成何种动作及做出何种应答==

​			  3⃣️ ==同步规定了执行各种操作的条件、时序关系==

**接口（访问服务点SAP）**：上层使用下层服务的入口（同一结点内==相邻两层间==交换信息的连接点）

​				==物理层（网卡接口）、数据链路层（MAC地址/网卡地址）、网络层（IP地址、网络地址）==

​				==传输层（端口号）、应用层（用户界面）==

**服务**：指==下层为紧邻的上层提供的功能调用==

​				**服务数据单元（SDU）**：为完成用户所要求的功能而应传送的数据

​				**协议控制信息（PCI）**：控制协议操作的信息

​				**协议数据单元（PDU）**：对等层次之间传送的数据单元

​				==PDU = PCI + SDU==

​				 **第n层在向n+1层提供服务时，此服务不仅包含第n层本身的功能，还包含下层服务提供的功能**

**分层的目的不包括定义功能执行的具体方法**

`OSI参考模型`

==世界上出现最早的计算机网络是ARPAnet==

<img src="计算机网络.assets\image-20211025142216381.png" alt="image-20211025142216381" style="zoom:30%;" />

* **表示层**

    ==数据格式变换、数据加密解密、数据压缩和恢复==

* **会话层**

    （向表示层实体/用户进程提供建立连接并在连接上有序地传输数据）

    ==建立、管理、终止会话==

    ==使用校验点可使会话在通信失效时从校验点/同步点继续恢复通信，实现数据同步==

* **传输层**

    （负责主机中两个进程之间的通信，即**端到端的通信**）

    ==传输单位是报文段（TCP）和用户数据报（UDP）==

    ==可靠传输、不可靠传输==，==差错控制==，==流量控制==，==复用分用==

    **复用**：多个应用层进程可同时使用下面运输层的服务		**分用**：运输层把收到的信息分别交付给上面应用层中相应的进程

* **网络层**

    （主要任务是把分组从源端传到目的端，为分组交换网上的不同主机提供通信服务）

    ==传输单位：数据报/分组==（二者父与子的关系）

    ==路由选择==，==流量控制==，==差错控制==，==拥塞控制==

    （若所有结点都来不及接受分组，而要丢弃大量分组的话，网络就处于拥塞状态。因此要采取一定措施缓解这种拥塞）

* **数据链路层**

    主要任务是把**网络层传下来的数据报组装成帧**（==传输单位：帧==）

    ==成帧==，==差错控制==，==流量控制==，==访问控制（控制对信道的访问）==

* **物理层**

    主要任务是在物理媒体上**实现比特流的透明传输**（==传输单位：比特==）

    ==定义接口特性==，==定义传输模式==（单工、半双工、双工）

    ==定义传输速率==，==比特同步==，==比特编码==

**流量控制只存在于数据链路层及其之上**

`TCP/IP参考模型`

**实际执行的国际标准是TCP/IP标准**

<img src="计算机网络.assets\image-20211025145913489.png" alt="image-20211025145913489" style="zoom: 33%;" />

<img src="计算机网络.assets\image-20211025145425457.png" alt="image-20211025145425457" style="zoom: 40%;" />

<img src="计算机网络.assets\image-20211025150001272.png" alt="image-20211025150001272" style="zoom: 33%;" />

### 第2章 物理层

**通信的目的**：==传送消息==（语音、文字、图像、视频等）

`接口特性`

* **机械特性**

    定义物理连接的特性，规定物理连接时所采用的==规格、接口形状、引线数目、引脚数量==

* **电气特性**

    规定传输二进制位时，线路上信号的==电压范围、阻抗匹配、传输速率和距离限制==

* **功能特性**

    指明某条线上出现的==某一电平表示何种意义==，接口部件的信号线的用途

* **规程特性**

    也称<u>过程特性</u>，定义各条物理线路的==工作规程和时序关系==

`信源、信道与信宿`

__信源__：产生和发送数据的源头								__信宿__：接收数据的终点

__信道__：信号的传输媒介，==一条通信线路包含一条发送信道和一条接收信道==

​				**按传输信号分为**：<u>模拟信道</u>（传输模拟信号）、<u>数字信道</u>（传输数字信号）		**按传输介质分为**：<u>无线信道、有线信道</u>

<img src="计算机网络.assets/截屏2022-08-19 21.25.43.png" alt="截屏2022-08-19 21.25.43" style="zoom:50%;" />

`三种通信方式`

__单工通信__：只有一个方向的通信而没有反方向的交互，==需要一条信道==

__半双工通信__：通信的双方都可以发送或接收信息，但任何一方都不能同时发送和接收，==需要两条信道==

__全双工通信__：通信双方可以同时发送和接收信息，==需要两条信道==

`数据传输方式`

__串行传输__：==速度慢、费用低、适合远距离==							__并行传输__：==速度快、费用高、适合近距离==

**同步传输**（区块传输）：数据的传送是以一个数据区块为单位，在传送数据时，需先送出一个或多个同步字符，再送出整批的数据

**异步传输**：将比特分成小组进行传送；传送数据时，加一个字符起始位和一个字符终止位；发送方可以在任何时刻发送这些比特

​		 				组，而接收方不知道它们会在什么时候到达

`码元`

用一个固定时长的信号波形代表不同离散数值的基本波形，**1码元可以携带多个比特的信息量**（==$N进制码元携带log_2N比特$==）

`速率`

也称数据率，指数据的传输速率，表示<u>单位时间内传输的数据量</u>，可用码元传输速率和信息传输速率表示

* __码元传输速率__

    也称__波特率__，表示单位时间内数字通信系统所传输的码元个数（也可称为脉冲个数或信号变化的次数）

    单位：__波特（Baud）__；1波特表示每秒传输一个码元；==码元速率与进制数无关，只与码元长度有关==

* __信息传输速率__

    又称__信息速率、比特率__，表示单位时间内数字通信系统传输二进制码元个数（即比特数）；**单位**：比特/秒（b/s）


​		 ==$若一个码元携带n比特的信息量，则M波特率的码元传输速率所对应的信息传输速率为Mn比特/秒$==

<img src="计算机网络.assets\image-20211025214901504.png" alt="image-20211025214901504" style="zoom: 50%;" />

<img src="计算机网络.assets\image-20211025215119971.png" alt="image-20211025215119971" style="zoom:50%;" />

`奈奎斯特定理与香农定理`

**影响失真程度的因素**：1⃣️ 码元传输速率 2⃣️ 信号传输距离 3⃣️ 噪声干扰 （前三种为正相关）4⃣️ 传输媒体质量（负相关）

**码间串扰**：接收端收到的信号波形失去了码元之间清晰界限的现象

* __奈奎斯特定理__

    __在理想低通（没有噪声、带宽有限）的信道中，为了避免码间串扰，极限码元传输速率为2W波特__（W是信道带宽，单位Hz）

    ==理想低通信道下的极限数据传输速率 = $2Wlog_2V$==（b/s）

    **结论**： 1⃣️ __在任何信道中，码元传输速率是有上限的__

    ​			    2⃣️ **信道的频带越宽，就可以用更高的速率进行码元的有效传输**（即W越大，数据传输速率越大）

    ​			    3⃣️ **奈氏准则给出了码元传输速率的限制，但并未对数据传输速率给出限制**

    ​			 		（即要提高数据传输速率就设法使每个码元携带更多比特的信息量）

* __香农定理__

    ==$信道的极限数据传输速率 = Wlog_2(1+S/N)$==(b/s)

    ==$信噪比（dB） = 10log_{10}(S/N)$==（W:信道的带宽；S:信道所传输信号的平均功率；N:信道内部的高斯噪声功率）

    结论： 1⃣️ **信道的带宽或信道的信噪比越大，则信息的极限传输速率就越高**

    ​				2⃣️ <u>对一定的传输带宽和一定的信噪比，信息传输速率的上限就确定了</u>
    
    ​				3⃣️ **只要信息的传输速率低于信道的极限传输速率，就一定能找到某种方法来实现无差错的传输**
    
    ​				4⃣️ **香农定理得出的为极限信息传输速率，实际信道能达到的传输速率要比它低不少**

`编码与调制`

__编码__：数据 $\Rightarrow$ 数字信号					__调制__：数据 $\Rightarrow$ 模拟信号

<img src="计算机网络.assets/截屏2022-08-24 16.18.14.png" alt="截屏2022-08-24 16.18.14" style="zoom:55%;" />

<img src="计算机网络.assets\image-20211026140735745.png" alt="image-20211026140735745" style="zoom:67%;" />

* __数字数据编码为数字信号__

    <img src="计算机网络.assets\image-20211026203311471.png" alt="image-20211026203311471" style="zoom: 67%;" />

    * __归零编码（RZ）__

    	<u>高电平代表1，低电平代表0</u>，<u>每个时钟周期的中间均跳变到低电平</u>；==提供了自同步机制==

    * __非归零编码（NRZ）__

    	同RZ编码，但不用归零；==无法同步==
    
    
    * __反向非归零编码（NRZI）__
    
    	<u>用信号的翻转代表0，保持不变代表1</u>；==能传输时钟信号，可同步==；**USB2.0通信编码就是NRZI编码**
    
    * __曼彻斯特编码__
    
    	<u>前一个间隔为高电平后一个间隔为低电平表示码元1；码元0相反</u>
    
    	==既作为时钟信号（可用于同步），又作为数据信号==；==以太网使用的编码方式就是曼彻斯特编码==
    
    	==频带宽度是原始基带宽度的两倍（数据传输速率只有调制速率的1/2）==
    
    * **差分曼彻斯特编码**
    
    	<u>若码元为1，则前半个码元的电平与上一个码元的后半个码元的电平相同；若码元为0，则相反</u>
    
    	==常用于局域网传输==；==可实现自同步，抗干扰性较好==
    
    * __4B/5B编码__
    
    	比特流中插入额外的比特以打破一连串的0或1，就是用5个比特来编码4个比特的数据，再传给接收方
    
    	==编码效率为80%==
    
* **数字数据调制为模拟信号**

    <img src="计算机网络.assets/截屏2022-08-24 16.29.11.png" alt="截屏2022-08-24 16.29.11" style="zoom:60%;" />

* **模拟数据编码为数字信号**

	计算机内部处理的是二进制数据，处理的都是数字音频所以需要将模拟音频通过采样、量化转换成有限个数字表示的离散序列( 即实现音频数字化)；最典型的例子是对音频信号进行编码的脉码调制(PCM) ，在计算机应用中能够达到最高保真水平的就是PCM编码，被广泛用于素材保存及音乐欣赏，CD、 DVD以及常见的WAV文件中均有应用；主要包括三步:抽样、量化、编码

	1⃣️ **抽样**，对模拟信号周期性扫描，把时间上连续的信号变成时间上离散的信号；为了使所得的离散信号能无失真地代表被抽样的模拟数据，要使用采样定理进行采样: ==$f_{采样频率}\ge 2f_{信号最高频率}$==

	2⃣️ **量化**，把抽样取得的电平幅值按一 定的分级标度转化为对应的数字值并取整数，就把连续的电平幅值转换为离散的数字量

	3⃣️ **编码**，把量化的结果转换为与之对应的二进制编码

* **模拟数据调制为模拟信号**

	为了实现传输的有效性，可能需要较高的频率；这种调制方式还可以使用频分复用技术，充分利用带宽资源；在电话机和本地交换机所传输的信号是采用模拟信号传输模拟数据的方式;模拟的声音数据是加载到模拟的载波信号中传输的

`数据交换方式`

* __电路交换__

    在进行数据传输前，两个结点之间必须先建立一条专用（双方独占）的物理通信路径（由通信双方之间的交换设备和链路逐段连接而成），该路径可能经过许多中间结点，在数据传输结束之前，这条线路一直保持

    **阶段**：==$建立连接（呼叫/电路建立）\to 通信（数据传输）\to 释放连接（拆除电路）$==

    **特点**：==独占资源==，==适用于远程批处理信息传输或系统间实时性要求高的大量数据传输的情况==

    **优点**：==传输时延小==；==数据顺序传送，无失序问题==；==适用于模拟信号和数字信号==

    ​				==实时性强==（双方一旦建立物理通路，便可以实时通信，适用于交互式会话类通信）

    ​				==全双工通信==（没有冲突，通信双方有不同的信道，不会争用物理信道）

    ​				控制简单（电路的交换设备及控制较简单）

    **缺点**：==建立连接时间长==；==信道使用效率低==（线路独占，即使通信线路空闲，也不能供其他用户使用，）

    ​				==灵活性差==（双方连接通路中的任何一点出了故障，必须重新拨号建立新连接，不适应突发性通信）

    ​				==无数据存储能力，难以平滑通信量==；==无法发现与纠正传输差错==（难以在通信过程中进行差错控制）
    
    ​				电路交换时，数据直达，**不同类型、不同规格、不同速率的终端很难相互进行通信**

* __报文交换__

​		  **数据交换单位**：==报文==					                  **传输方式**：==存储转发==

​		  **优点**： ==无需建立连接==（无建立连接时延，用户可随时发送报文）

​							==动态分配线路==（动态选择报文通过的最佳路径，可以平滑通信量）

​							==提高线路可靠性==（某条传输路径发生故障，可重新选择另一条路径传输）

​							==提高线路利用率==（通信双方在不同的时间一段一段地部分占有这条物理通道，多个报文可共享信道）

​							==提供多目标服务==（一个报文可同时发往多个目的地址）

​							==便于类型、规格和速度不同的计算机之间进行通信==

​							（在存储转发中容易实现代码转换和速率匹配，甚至收发双方可以不同时处于可用状态）

​			**缺点**：==实时性差==，（不适合传送实时或交互式业务的数据；数据进入交换结点后要经历存储转发过程，引起转发时延）

​							==只适用于数字信号==

​							由于报文长度没有限制，而每个中间结点都要完整地接收传来的整个报文，当输出线路不空闲时，还可能要存储几个							完整报文等待转发，**要求网络中每个结点有较大的缓冲区**；为了降低成本，减少结点的缓冲存储器的容量，有时要把							等待转发的报文存在磁盘上，进一步增加了传送时延

* __分组交换__

    （把数据分割成小块，然后逐块地发送）

    **传输方式**：==存储转发==（==限制所传输的数据单位的长度==）
    
    **优点**：==无建立时延==（无需为通信双方预先建立条专用通信线路，用户可随时发送分组）
    
    ​				==线路利用率高==（通信双方在不同的时间一段一段地部分占有这条物理通道，多个分组可共享信道）
    
    ​				==简化了存储管理==
    
    ​			（分组的长度固定，相应的缓冲区大小也固定，交换结点中存储器的管理被简化为对缓冲区的管理，相对比较容易）
    
    ​				==加速传输==（后一个分组存储可以和前一个分组转发并行操作；传输分组比报文所需缓冲区小，减少等待发送时间）
    
    ​				==提高可靠性==（减少出错几率和重发数据量，减少传输时延）
    
    ​				分组短小，**适用于计算机之间突发式数据通信**
    
    **缺点**：尽管分组交换比报文交换的传输时延少，但<u>仍存在存储转发时延</u>，而且其<u>结点交换机必须具有更强的处理能力</u>
    
    ​				==降低了通信效率==（每个分组都要加控制信息，一定程度上增加了处理的时间）
    
    ​				当分组交换采用**数据报**服务时，<u>可能出现失序、丢失或重复分组</u>，分组到达目的结点时，要对分组按编号进行排序等				工作，增加了麻烦；若采用**虚电路**服务，虽无失序问题，但<u>有呼叫建立、数据传输和虚电路释放三个过程</u>
    
    * **数据报方式**
    
    	（就是普通分组交换）
    
    	**特点**：1⃣️ 数据报方式为网络层==提供无连接服务==（发送方可随时发送分组，网络中的结点可随时接收分组）
    
    	​				（**无连接服务**：不事先为分组的传输确定传输路径，每个分组独立确定传输路径，不同分组传输路径可能不同）
    
    	​				2⃣️ ==同一报文的不同分组到达目的结点时可能发生乱序、重复与丢失==
    
    	​				3⃣️ ==每个分组在传输过程中都必须携带源地址和目的地址，以及分组号==
    
    	​				4⃣️ 分组在交换结点存储转发时，需要排队等候处理，这会带来一定的时延；当通过交换结点的通信量较大或网
    	​						络发生拥塞时，这种时延会大大增加，交换结点还可根据情况丢弃部分分组
    
    	​				5⃣️ 网络具有冗余路径，当某一交换结点或一段链路出现故障时，可相应地更新转发表，寻找另一条路径转发分						组，==对故障的适应能力强，适用于突发性通信==，不适于长报文、会话式通信
    
    * **虚电路方式**
    
    	一条源主机到目的主机类似于电路的路径，路径上所有结点都要维持这条虚电路的建立，都维持一张虚电路表， 每一项记录了一个打开的虚电路的信息
    
    	**流程**：1⃣️ **建立连接**，源主机发送“呼叫请求”分组并收到“呼叫应答”分组后才算建立连接
    
    	​				2⃣️ **数据传输**，每个分组携带==虚电路号，分组号、检验和等控制信息==
    
    	​				2⃣️ **释放连接**，源主机发送“释放请求”分组以拆除虛电路
    
    	**特点**：1⃣️ 虚电路方式为网络层==提供连接服务==（**逻辑连接**）
    
    	​					（**连接服务**：首先为分组的传输确定传输路径，然后沿该路径传输系列分组，系列分组传输路径相同，传输结						束后拆除连接）
    
    	​				2⃣️ 一次通信的所有分组都通过虚电路顺序传送，**分组不需携带源地址、目的地址等信息**，<u>相对数据报方式开销</u>
    
    	​						<u>小</u>，==同一报文的不同分组到达目的结点时不会乱序、重复或丢失==
    
    	​				3⃣️ 分组通过虚电路上的每个节点时，==节点只进行差错检测，不需进行路由选择==（路已经选好了）
    
    	​				4⃣️ ==每个节点可能与多个节点之间建立多条虚电路==，每条虚电路支持特定的两个端系统之间的数据传输，可以对
    	​						两个数据端点的流量进行控制，==两个端系统之间也可以有多条虚电路为不同的进程服务==
    
    	​				5⃣️ **当网络中的某个结点或某条链路出故障而彻底失效时，则所有经过该结点或该链路的虚电路将遭到破坏**
    
    	​				<img src="计算机网络.assets/截屏2022-08-25 21.51.49.png" alt="截屏2022-08-25 21.51.49" style="zoom: 75%;" />

`物理层传输介质`

**传输介质**：1⃣️ **导向性传输介质**，电磁波被导向沿着固体媒介（铜线/光纤）传播

​						 2⃣️ **非导向性传输介质**，自由空间，介质可以是空气、真空、海水等

**导向性传输介质**

* **双绞线**

​		 __绞合作用__：==绞合可以减少对相邻导线的电磁干扰==			__特点__：==价格便宜==

​		 __屏蔽双绞线（STP）__：为了进一步提高抗电磁干扰的能力，可在双绞线的外面再加上一层，即用金属丝编织成的屏蔽层；无屏														 蔽层的双绞线称为__非屏蔽双绞线（UTP）__

​		 距离太远时，对于**模拟传输**，可以用<u>放大器放大衰减的信号</u>；对于**数字传输**，<u>用中继器将失真的信号整形</u>

* **同轴电缆**

​		 由于外导体屏蔽层的作用，==同轴电缆具有良好的抗干扰特性==；**被用于传输较高速率的数据，传输距离更远；价格比双绞线贵**

​		 **50欧姆同轴电缆**：用于传送<u>基带数字信号</u>，又称为<u>基带同轴电缆</u>，在局域网中得到广泛应用

​		 **75欧姆同轴电缆**：用于传送<u>宽带信号</u>，又称为<u>宽带同轴电缆</u>，主要用于有线电视系统

* **光纤**

​		 __多模光纤__：利用光的全反射特性，可以将从不同角度入射的多条光线在一根光纤中传输，这种光纤称为<u>多模光纤</u>

​		 ==多模光纤光源是发光二极管==；==易失真，适合于近距离传输==，

​		 __单模光纤__：光纤的直径减小到只有一个光的波长时，光纤就像一根波导那样，使光线一直向前传播，而不会产生多次反射

​		 ==单模光纤的光源为定向性很好的半导体激光器==；==衰耗小，适合远距离传输==

​		 __特点__：1⃣️ 传输损耗小，中继距离长     2⃣️ ==抗雷电和电磁干扰性能好==     3⃣️ 不易被窃听或截取数据      4⃣️ 体积小，重量轻

**非导向性传输介质**

* **无线电波**

​		 信号向<u>所有方向</u>传播；==具有较强的穿透能力==

* **微波、红外线和激光**

​		 信号<u>固定方向</u>传播，沿直线传播

​		 __卫星通信__：利用地球同步卫星作为中继来转发微波信号

​						 		 **优点**：==通信容量大；距离远、覆盖广；广播通信和多址通信==

​						 		 **缺点**：==保密性差；端到端传播时延长；受气候影响大；误码率高；成本高==

`物理层设备`

* **中继器**

​		  __原理__：==信号再生和还原==（而非简单地将衰减的信号放大）

​		 ==中继器两端的网络部分是网段，而不是子网==； ==中继器两端的网段一定要是同一个协议，且两个网段速率要相同==

​		 （<u>如果某个网络设备具有存储转发的功能，那么可以认为它能连接两个不同的协议</u>，即==中继器没有存储转发的功能==）

​		 ==端口仅作用于信号的电气部分，而不管是否有错误或不适于网段的数据==；==使用中继器连接的几个网段仍然是一个局域网==

​		 **两端可连相同媒体，也可连不同媒体**（光纤、同轴电缆等）

​		 ==在采用粗同轴电缆的10BASE5以太网规范中，互相串联的中继器的个数不能超过4个，且用4个中继器串联的5段通信介质中==

​		 ==只有3段可以挂接计算机==

|          |        中继器        |      放大器      |
| :------: | :------------------: | :--------------: |
| 信号种类 |     ==数字信号==     |   ==模拟信号==   |
|   原理   | 将衰减的信号整形再生 | 将衰减的信号放大 |

* **集线器**

​		  对信号进行再生==放大转发==，对衰减的信号进行放大，接着转发到其他所有（除输入端口外）处于工作状态的端口上，

​		  以增加信号传输的距离

​		  __实质是一个多端口的中继器__；==只能工作在半双工状态下==；==集线器不能分割冲突域，所有集线器的端口都属于同一个冲突域==

### 第3章 数据链路层

#### 功能

①__为网络层提供服务__

无确认无连接服务、有确认无连接服务、有确认面向连接服务

②__链路管理__

连接的建立、维持、释放

③__组帧__

④__流量控制__

⑤__差错控制__

   #### 组帧

`字符计数法`

![image-20211107123704799](计算机网络.assets\image-20211107123704799.png)

如果计数字段出错，即失去了帧边界划分的依据，那么接收方就无法判断所传输帧的结束位和下一帧的开始位，收发双方将失去同步

`字符填充的首尾定界符法`

![image-20211107114412987](计算机网络.assets\image-20211107114412987.png)

发送方在每个EOT或SOH字符前再插入一个ESC字符，接收方收到数据后再删除这个插入的ESC字符

`零比特填充的首尾标志法`

用01111110标志一帧的开始和结束

为了不使信息位中出现的比特流01111110被误判为帧的首尾标志，发送方的数据链路层在信息位中遇到5个连续的1时，将自动在其后插入一个0，而接收方每收到5个连续的1时，自动删除后面的0

==容易由硬件实现，性能优于字符填充法==

`违规编码法`

在物理层进行比特编码时，通常采用违规编码法。曼彻斯特编码将数据比特1编码成“高-低”电平对，将数据比特0编码成“低-高”电平对，而“高-高”电平对和“低-低”电平对在数据比特中是违规的，可以借用这些违规编码序列来定界帧的起始和终止

==目前较普遍使用的帧同步法是比特填充和违规编码法==

#### 流量控制

 `停止-等待协议`

__出错情况:__

①**数据帧丢失或到达目的站的帧遭到破坏**

​	（接收方会将损坏的帧丢弃）在一个帧发送后，发送方等待确认，如果在计时器计满时仍未收到确认，则再次发送相同的帧

​	![image-20211108134958699](计算机网络.assets\image-20211108134958699.png)

②**确认帧丢失或遭到破坏**

​	发送方会重传已被接收的数据帧，接收方收到同样的数据帧会丢弃该帧，并重传一个该帧对应的确认帧

​	![image-20211108134927554](计算机网络.assets\image-20211108134927554.png)

③__确认帧迟到__

​	![image-20211108135116259](计算机网络.assets\image-20211108135116259.png)

==停止-等待协议通信信道的利用率低==

`后退N帧协议(GBN)`

==接收方只允许按顺序接收帧==，虽然又收到了其他帧，但必须将这些帧==丢弃==，且==应重复发送已发送的最后一个确认帧==

==可以在连续收到好几个正确的数据帧后，才对最后一个数据帧发确认信息==

__发送窗口尺寸__：==$1\leqslant W_T \leqslant 2^n-1 $==

![image-20211108134413506](计算机网络.assets\image-20211108134413506.png)

![image-20211108141845635](计算机网络.assets\image-20211108141845635.png)

`选择重传协议(SR)`

![image-20211108133913558](计算机网络.assets\image-20211108133913558.png)

__发送方__：①如果收到ACK且帧序号在窗口内，则将该帧标记为已接收；如果该帧是窗口的下界，则将窗口向前移动到具有最小序号的未确认帧处；如果窗口移动了且窗口内有未发送的帧，则发送这些帧

​					 ②每个帧都有自己的定时器，一个超时事件发生后只重传一个帧

__接收方__：将确认一个正确接受的帧而不管其是否按序，失序的帧将被缓存，并返回给发送方一个该帧的确认帧，直到所有帧被收到为止，才将这批帧交付上层，向前移动滑动窗口

![image-20211108140030699](计算机网络.assets\image-20211108140030699.png)

==$W_{Tmax}=W_{Rmax}=2^{(n-1)}$==







`其他`

__停止-等待协议__：==发送窗口大小=1，接收窗口大小=1==

__后退N帧协议__：==发送窗口大小>1，接收窗口大小=1==

__选择重传协议__：==发送窗口大小>1，接收窗口大小>1==

__信道利用率__：==$信道利用率=(L/C)/T=帧的传输时延/(帧的传输时延+确认帧的传输时延+2\times传播时延)$==[^7]

__信道吞吐率__：==信道吞吐率=信道利用率*发送方的发送速率==

### 第4章 网络层

`SDN`

**数据平面**

对于数据处理过程中各种具体处理转发的过程（对应数据报的转发）；==时间短，通常硬件解决==

**功能**：根据转发表进行转发，==是路由器的本地动作==

<img src="计算机网络.assets/截屏2022-09-05 17.02.14.png" alt="截屏2022-09-05 17.02.14" style="zoom:50%;" />

**控制平面**

用于控制和管理网络协议的运行（对应数据报的路由选择）；==时间长，通常软件解决==

* **传统方法/每路由器法**

	路由选择算法运行在每台路由器中，并且在每台路由器中都包含转发和路由选择两种功能；在一台路由器中的路由选择算法与其他路由器中的路由选择算法通信(通过交换路由选择报文)，计算出路由表和转发表

	==路由选择处理器执行控制平面功能==（在传统的路由器中，它执行路由选择协议，维护路由选择表与关联链路状态信息，并为该路由器计算转发表）

* **SDN方法**

	控制平面从路由器物理上分离，路由器仅实现转发，远程控制器计算和分发转发表以供每台路由器所使用；路曲器通过交换包含转发表和其他路由选择信息的报文与远程控制器通信，因为计算转发并与路由器交互的控制器是用软件实现的，所以网络是
	"软件定义的"

	==路由选择处理器负责与远程控制器通信==，目的是接收远程控制器计算的转发表项

<img src="计算机网络.assets/截屏2022-09-05 17.08.50.png" alt="截屏2022-09-05 17.08.50" style="zoom:60%;" />

**SDN控制器**：维护准确的网络状态信息(远程链路、交换机和主机的状态) ；为运行在控制平面中的网络控制应用程序提供这些信息						 （逻辑集中，在多台服务器上实现）

**网络控制应用程序**：根据SDN控制器提供的方法，这些应用程序通过这些方法能够监视、编程和控制下面的网络设备

**SDN控制器的三个层次**：

1️⃣ **对于网络控制应用程序的接口**

​		SDN控制器通过北向接口与网络控制应用程序交互；该API允许网络控制应用程序在状态管理层之间读写网络状态

2️⃣ **网络范围状态管理层**

​		由SDN控制平面作出的最终控制决定，将要求控制器具有有关网络的主机、链”路等最新状态信息

3️⃣ **通信层**

​		SDN控制器与受控网络设备之间的通信（OpenFlow协议），包含南向接口

<img src="计算机网络.assets/截屏2022-09-05 17.20.32.png" alt="截屏2022-09-05 17.20.32" style="zoom:70%;" />

`路由算法与路由协议`

**路由算法分类**

* **静态路由算法**（非自适应路由算法）

	（管理员手工配置路由信息）

	**优点**：<u>简便可靠；在负荷稳定、拓扑变化不大的网络中运行效果很好</u>；==广泛用于高度安全性的军事网络和较小的商业网络==

	**缺点**：==路由更新慢，不适用大型网络==

* **动态路由算法**（自适应路由算法）

	（路由器间彼此交换信息，按照路由算法优化出路由表项）

	**优点**：==路由更新快==；==及时响应链路费用或网络拓扑变化；适用大型网络==

	**缺点**：==算法复杂，增加网络负担==

	* **全局性**

		例子：链路状态路由算法（OSPF）

		所有路由器掌握<u>完整</u>的网络拓扑和链路费用信息

	* **分散性**

		例子：距离向量路由算法（RIP）

		路由器只掌握<u>物理相连</u>的邻居及链路费用

**分层次的路由选择协议**

**背景**：1️⃣ 因特网规模很大  2️⃣ 许多单位不想让外界知道自己的路由选择协议，但还想连入因特网

**自治系统AS**：在单一的技术管理下的一组路由器，而这些路由器使用一种AS内部的路由选择协议和共同的度量以确定分组

​							  在该AS内的路由，同时还使用一种AS之间的路由协议以确定在AS之间的路由；一个AS内的所有网络都属于一

​							  个行政单位来管辖，一个自治系统的所有路由器在本自治系统内都必须连通

**路由选择协议**：

* **内部网关协议**（IGP）

	（一个AS内使用的）				例子：RIP、 OSPF

* **外部网关协议**（EGP）

	（AS之间使用的）                 例子：BGP

	<img src="计算机网络.assets/截屏2022-09-05 17.51.05.png" alt="截屏2022-09-05 17.51.05" style="zoom:50%;" />

### 第5章 传输层

`TCP`

**特点**：==可靠；面向连接；时延大；适用于大文件==



`UDP`

**特点**：==不可靠；无连接；时延小；适用于小文件==





















































### 第6章 应用层

`应用层概述`

**应用层协议定义了**：

1⃣️ 应用进程交换的报文类型，请求还是响应?			2⃣️ 各种报文类型的语法，如报文中的各个字段及其详细描述

3⃣️ 字段的语义，即包含在字段中的信息的含义		 4⃣️ 进程何时、如何发送报文，以及对报文进行响应的规则

**应用层功能**：1⃣️ 文件传输、访问和管理	2⃣️ 电子邮件	3⃣️ 虚拟终端	4⃣️ 查询服务和远程作业登录

**主要协议**：FTP、SMTP、POP3、HTTP、DNS

`C/S模型`

客户与客户之间不能之间通信

`P2P模型`

1⃣️ 每个主机<u>既可以提供服务也可以请求服务</u> 				 2⃣️ 任意端系统/节点之间可以<u>直接通讯</u>

3⃣️ 节点间歇性接入网络	4⃣️ 节点可能改变IP地址	  5⃣️ 可扩展性好	6⃣️ 网络健壮性强

`域名系统`（DNS）

（一个==基于C/S模型==的分布式数据库系统，用于域名和IP地址之间的相互映射；采用==UDP==传输）

==域名在不同时间可以解析出不同的IP地址（如负载均衡）；多个域名可以指向同一台主机IP地址==

<u>用户主机只需要知道本地域名服务器的IP</u>（其他事情都由本地域名服务器完成，并把最后结果返回给用户主机）

<img src="计算机网络.assets/截屏2022-08-24 20.04.30.png" alt="截屏2022-08-24 20.04.30" style="zoom:50%;" />

<img src="计算机网络.assets/截屏2022-08-24 20.10.33.png" alt="截屏2022-08-24 20.10.33" style="zoom:50%;" />

<img src="计算机网络.assets/截屏2022-08-24 20.15.26.png" alt="截屏2022-08-24 20.15.26" style="zoom:50%;" />

（权限域名服务器也称为授权域名服务器）

`文件传输协议`（FTP）

==FTP使用TCP实现可靠传输==；==控制连接始终保持、数据连接保持一会==（数据传完即断开）

**控制连接先于数据连接被建立，并晚于数据连接被释放**

在==服务端==主动方式下==控制连接使用TCP 21端口，数据连接使用TCP 20端口==，被动方式由服务器和客户端自行协商决定

在客户端控制连接和数据连接的端口号都由**系统自动分配**

**FTP传输模式**：1⃣️ <u>文本模式</u>（ASCII模式，以文本序列传输数据）2⃣️ <u>二进制模式</u>（Binary模式，以二进制序列传输数据）

==FTP允许客户指明文件的类型和格式，并允许文件具有存取权限==；<u>匿名FTP访问通常使用anonymous作为用户名</u>

<img src="计算机网络.assets/截屏2022-08-24 20.22.36.png" alt="截屏2022-08-24 20.22.36" style="zoom:50%;" />

`电子邮件`

<img src="计算机网络.assets/截屏2022-08-24 20.31.08.png" alt="截屏2022-08-24 20.31.08" style="zoom:50%;" />

==电子邮件内容包括邮件头和邮件体两部分==

<u>邮件头一部分由系统自动生成（如发信人地址，发送时间），另一部分由发件人输入（收信人地址，邮件主题）</u>

**简单邮件传送协议**（SMTP）

负责发送邮件的SMTP进程就是<u>SMTP客户</u>，负责接收邮件的进程就是<u>SMTP服务器</u>

==TCP连接；端口号25（服务器端）；C/S模式==；				**通信的三个阶段**：$连接建立\to 邮件发送\to 连接释放$

**缺点**： 1⃣️ SMTP不能传送可执行文件或者其他二进制对象  2⃣️ SMTP服务器会拒绝超过一定长度的邮件SMTP

​				 3⃣️ 仅限于传送7位ASCII码，不能传送其他非英语国家的文字（==SMTP、POP3都基于ASCII码==）

​			 （使用**通用因特网邮件扩充（MIME）**使电子邮件系统可以支持声音、图像、视频、多种国家语言）

**邮局协议**（POP3）

==TCP连接；端口号110（服务器端）；C/S模式==；			**工作方式**：1⃣️ 下载并保留（在服务器） 2⃣️ 下载并删除

==IMAP、POP3都使用明文传输密码==

<img src="计算机网络.assets/截屏2022-08-26 17.05.36.png" alt="截屏2022-08-26 17.05.36" style="zoom:50%;" />

（==发送端邮件服务器和接收端邮件服务器之间也使用SMTP==）

**网际报文存取协议**（IMAP）

IMAP协议比POP协议复杂；当用户PC上的IMAP客户程序打开IMAP服务器的邮箱时，用户可以看到邮箱的首部，若用户需要打开某个邮件，该邮件才上传到用户的计算机上；IMAP可以让用户在不同的地方使用不同的计算机随时上网阅读处理邮件，还允许只读取邮件中的某一个部分(先看正文，有WiFi的时候再下载附件)

**基于万维网的电子邮件**

<img src="计算机网络.assets/截屏2022-08-26 17.09.25.png" alt="截屏2022-08-26 17.09.25" style="zoom:55%;" />

`HTTP协议`

==无状态的==（借助Cookie）；==无连接的==（交换HTTP报文前不需要先建立HTTP连接）

==HTTP 1.0只支持非持久连接==（每请求一个对象需要建立一次TCP连接），而==HTTP 1.1的默认方式为持久连接==（keep-alive）















[^1]: 
[^2]: 
[^3]: 

[^4]: 

[^5]: 
[^6]: 

[^7]: T:发送周期，L：T内发送L比特数据，C：发送方的数据传输速率
