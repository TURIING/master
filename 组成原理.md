### 第一章 计算机系统概述

#### 计算机的分类与发展方向

`按指令和数据流分类`

* **单指令流和单数据流系统**

	==冯·诺伊曼体系结构==

* **单指令流和多数据系统**

	阵列处理器和向量处理器系统

* **多指令流和单数据流系统**

	不存在

* **多指令流和多数据流系统**

	多处理器和多计算机系统

#### 计算机系统层次结构

##### 计算机系统的组成

==硬件系统和软件系统==共同构成流一个完整的计算机系统

某功能既可以用软件实现也可以用硬件实现，则称==软件硬件在逻辑上是等效的（等价❌）==

##### 早期的冯·诺伊曼机

冯·诺伊曼在研究EDVAC机时提出了“==存储程序==”的概念

> 存储程序： 指将指令以代码的形式事先输入计算机的主存储器，然后按其在存储器中的首地址执行程序的第一条指令，以后就按该程序的规定顺序执行其他指令，直到程序执行结束

**特点**：

​		1⃣️ 计算机硬件系统由==运算器、存储器、控制器、输入设备、输出设备==组成

​		2⃣️ 指令和数据以==同等地位==存储在存储器中，并可按地址寻访

​		3⃣️ ==指令和数据均用二进制代码表示==

​		4⃣️ 指令由操作码和地址码组成

​		5⃣️ 指令在存储器内按顺序存放

​		6⃣️  ==以运算器为中心==，**输入、输出设备通过运算器与存储器传送数据**

##### 现代计算机结构

==存储器为中心==、==CPU = 运算器+控制器==

##### 计算机的功能部件

`主存储器`

**组成**：==MAR、MDR、地址译码器==

**工作方式**：==按地址存取方式==（按存储单元的地址进行存取）

**地址寄存器（MAR）**：==存放访存地址==，经过地址译码后找到所选的存储单元，==MAR位数=存储单元的个数==

**数据寄存器（MDR）**：==用于暂存要从存储器中读或写的信息==，==MDR位数=存储字长==

==现代计算机通常把MAR、MDR集成在CPU中（控制器内）==

|   概念   |                             描述                             |
| :------: | :----------------------------------------------------------: |
|  存储元  |           存储二进制的电子元件，每个存储元可存1bit           |
| 存储单元 |                每个存储单元存放一串二进制代码                |
|  存储字  |                  存储单元中存储的二进制代码                  |
|    字    | 计算机在进行数据处理，一次存取、加工、传送的数据长度，一个字由多个字节组成；**随架构改变字长**（如64位CPU中一字为64位） |
|   字长   |                    计算机每个字包含的位数                    |

`运算器`

**功能**：用于算术运算（加减乘除）和逻辑运算（与或非）

**组成**：

* **算术逻辑单元（ALU）**

	通过内部复杂的电路实现算术运算、逻辑运算

* **累加器（ACC）**

	用于存放操作数或运算结果

* **乘商寄存器（MQ）**

	在乘除运算时，用于存放操作数或运算结果

* **操作数寄存器（X）**

	用于存放操作数

* **程序状态寄存器（PSW、标志寄存器）**

	用于存放ALU运算得到的一些标志信息或处理机的状态信息（如结果是否溢出、有无进位或错位、结果是否为负）

* **变址寄存器（IX）**

* **基址寄存器（BR）**

==寄存器的基本单元是D触发器==

`控制器`

* **控制单元（CU）**

	分析指令，给出控制信号

* **程序计数器（PC）**

	用于==存放下一条指令的地址==，有自动加1功能

* **指令寄存器（IR）**

	==存放当前执行的指令==

|  是否可见  |            器件            |
| :--------: | :------------------------: |
|  用户可见  | 通用寄存器、程序状态寄存器 |
| 用户不可见 |    MAR、MDR、指令寄存器    |

##### 计算机软件的分类

* **系统软件**

	==操作系统、数据库管理系统（DBMS）、语言处理程序（编译器）、分布式软件系统、网络软件系统、标准库程序、服务性程序（链接器）==

	> DBMS： 位于用户和操作系统之间的一层数据管理软件，是系统软件
	>
	> DBS： 指计算机系统中引入数据库后的系统，一般由数据库、数据库管理系统、数据库管理员（DBA）和应用系统构成

* **应用软件**

##### 计算机系统的多级层次结构

<img src="组成原理.assets/截屏2022-04-19 00.31.31.png" alt="截屏2022-04-19 00.31.31" style="zoom: 67%;" />

==下层是上层的基础，上层是下层的扩展==、==上下层是可以分割的，仅有下层而没有上层也是可以的==、==上层是下层的功能实现==

#### 计算机的性能指标

`机器字长`

**定义**：指计算机进行一个整数运算所能处理的二进制数据的位数，衡量计算机并行处理的能力

==机器字长等于CPU内部用于整数运算的运算器位数和通用寄存器位数（浮点寄存器位数❌）==

|   概念   |               描述               |
| :------: | :------------------------------: |
| 指令字长 | 一个指令中包含的二进制代码的位数 |
| 存储字长 | 一个存储单元存储二进制数据的位数 |
| 数据字长 | 数据总线一次能并行传送信息的位数 |

`数据通路带宽`

**定义**：==指数据总线一次所能并行传送信息的位数==，衡量计算机在功能级部件间传送数据的能力

**数据通路**：数据在功能部件之间传送的路径（如内存到CPU）

`吞吐量`

**定义**：==指系统在单位时间内处理请求的数量==

`响应时间`

**定义**：**指用户向计算机发送一个请求，到系统对该请求作出响应并获得所需结果的等待时间**

`主频和CPU时钟周期`

**CPU时钟周期**：CPU中==最小的时间单位==(us、ns)，执行指令的每个动作至少需要1个时钟周期，==CPU时钟周期 = 1 / 主频==

**主频（CPU时钟频率）**：主频越高，执行指令的速度越快（Hz）

|   概念   |                     描述                      |
| :------: | :-------------------------------------------: |
| 指令周期 | CPU从内存取出一条指令并执行这条指令的时间总和 |
| CPU周期  |   又称机器周期，从内存取一条指令的最短时间    |
| 中断周期 |           执行一次中断所需要的周期            |

`CPI`

**定义**：==执行一条指令所需的时钟周期数==

对于一个程序或一台机器来说，CPI指该程序或该机器指令集中的所有指令执行所需的**平均时钟周期数**

==执行一条指令的耗时 = CPI x CPU时钟周期==

==时钟频率并不会影响CPI，但可加快指令的执行速度==

> **主频高的CPU不一定比主频低的CPU快**
>
> 如A的主频2GHz，CPI=10；B的主频1GHz，CPI=1
>
> **若CPI相同，主频高的CPU也不一定比主频低的CPU快**
>
> 还要看指令系统，如A不支持乘法指令，只能用多次加法实现乘法，而B支持乘法

`CPU执行时间`

**定义**：**运行一个程序所花费的时间**

==CPU执行时间 = CPU时钟周期数/主频 = (指令条数xCPI)/主频 = CPI x 指令条数 x 时钟周期==

`IPS`

**定义**：==每秒执行多少条指令==，==IPS = 主频/CPI==

**MIPS**:==每秒执行多少百万条指令==，==MIPS = 指令条数/(执行时间x10^6) = 主频/(CPIx10^6)==

`FLOPS`

**定义**：==每秒执行多少次浮点运算==

==MFLOPS = 浮点操作次数/(执行时间x10^6)==

**$$K(10^3)、M（10^6）、G(10^9)、T(10^{12})$$**

`专业术语`

>**基准程序**
>
><u>用来进行性能评价的一组程序</u>
>
>**系列机**： 具有基本相同的体系结构，使用相同基本指令系统的多个不同型号的计算机组成的一个产品系列
>
>**兼容**：指计算机软件或硬件的通用性，即使用或运行在某个型号的计算机系统中的硬件/软件也能应用于另一个型号的计算机系统
>
>**单片机**：<u>CPU+存储器+中断、IO = 单片机</u>

### 第2章 数据的表示和运算

#### 数制与编码

##### 进制的相互转换

`二进制 -> 八进制、十六进制`



`任意进制 -> 十进制`

`十进制 -> 任意进制`

##### 真值和机器数

| 概念 | 描述 |
| :--: | :--: |
|      |      |

#### 定点数的表示与运算

##### 定点数的表示

`无符号数`

(全部二进制位均为数值位)

**范围**:==$$0～2^n-1$$==

==通常只有无符号整数，没有无符号小数==

`补码`

定点整数：==$$[x]_补 = 1,00..00\Rightarrow x=-2^n$$==

定点小数：==$$[x]_补 = 1.00..00 \Rightarrow x=-1$$==

==$$[x]_补 \to [-x]_补$$：符号位、数值位全部取反，末位加1==

`移码`

**常用于表示浮点数的阶码** ==只能表示整数==

==补码的符号位取反即移码==

`与原码的相互转换`

|      |   正数   |                     负数                      |
| :--: | :------: | :-------------------------------------------: |
| 反码 | ==相同== | ==若符号位为1，则符号位不变，数值位全部取反== |
| 补码 | ==相同== |    ==符号位不变，数值位按位取反，末位加1==    |

（字长为n+1）

|      |           整数范围            |               小数范围                |                      真值0                      |
| :--: | :---------------------------: | :-----------------------------------: | :---------------------------------------------: |
| 原码 | ==$$-(2^n-1)\le x\le2^n-1$$== | ==$$-(1-2^{-n})\le x \le 1-2^{-n}$$== | ==不唯一，$$[+0]_原 = 00000,[-0]_原 = 10000$$== |
| 反码 |            同原码             |                同原码                 |  ==不唯一$$[+0]_反 = 00000,[-0]_反 = 11111$$==  |
| 补码 |  ==$$-2^n\le x \le 2^n-1$$==  |     ==$$-1\le x \le 1-2^{-n}$$==      |      ==唯一，$$[+0]_补 =[-0]_补 00000$$==       |
| 移码 |            同补码             |                  无                   |     ==唯一，$$[+0]_移 = [-0]_移 = 10000$$==     |

